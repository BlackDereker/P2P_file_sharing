description
===
TODO


PROTOCOL COMMANDS
===
notes
---
'c' :  client
's' :  server
'p' :  peer

OK : generic confirmation
ERROR : generic error reply

All commands are terminated with a newline (\n) and the null character (\0).


CLIENT -> SERVER
---

1. initial connection

1.1. the client is connecting to the server for the first time
c: HELLO
# send a new unique username for use as default
s: AVAILABLE <username>
# choose whether to use the default username or choose one of your own
c: IWANT <username>
# check whether the username is unique
1.1.1 the username is unique
s: WELCOME <username>
1.1.2 the username is taken
s: AVAILABLE <username>
etc.


1.2. the client is known to the server, i.e. already has registered a username
c: HELLO <username>
# check whether the username is indeed registered
1.2.1. the username is valid
s: WELCOME <username>
1.2.2. the username is unknown to the server
s: AVAILABLE <username>
etc.


NEXT


2.
c: LISTENING <listening_ip> <listening_port>  # send the ip address and port we are listening to for incoming connections
s: OK


3.
c: LIST <number_of_files> [\n<file_a>] [\n<file_b>] [...]  # send the list of the files you are sharing
s: OK


4.
# TODO
# maybe optimize to this?
# FULLLIST 3
# john 2
# a.txt
# b.c
# jack 1
# ab cd.py
c: SENDLIST  # request the list of clients and the files they are sharing
s: FULLLIST <number_of_files> [\n<client_a> <file_a>] [\n<client_a> <file_b>] [...] [\n<client_b> <file_a>] [\n<client_b> <file_c>] [...]  # send the list of the clients and the files they are sharing


5.
c: WHERE <peer_username>
5.1. the peer_username is valid
s: AT <peer_IP_address> <peer_port>
5.2. the peer_username is unknown
s: UNKNOWN


6.
c: <invalid message>
s: ERROR


SERVER -> CLIENT
---


CLIENT -> CLIENT
---
c: GIVE <filename>
# TODO
# send hash ?
p: TAKE <file_size>
p: <file buffer>
c: THANKS

# if the file doesn't exist
c: GIVE <filename>
p: NOTEXIST
# send LIST to client and server
p: LIST <number_of_files> [\n<file_a>] [\n<file_b>] [...]  # send the list of the files you are sharing
c: OK
